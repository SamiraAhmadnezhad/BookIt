name: Deploy Flutter Web to GitHub Pages

on:
  push:
    branches:
      - main  # یا هر شاخه‌ای که می‌خواهید با پوش کردن به آن، سایت آپدیت شود

jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout 🛎️
        uses: actions/checkout@v3

      - name: Setup Flutter SDK 🐦
        uses: subosito/flutter-action@v2
        with:
          channel: 'stable' # یا 'beta'

      - name: Install Dependencies 👨‍💻
        run: flutter pub get

      - name: Build Web 🏗️
        run: flutter build web --release --base-href /${{ github.event.repository.name }}/
        #  ↑↑↑  این بخش خیلی مهم است!  ↑↑↑

      - name: Deploy to GitHub Pages 🚀
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          branch: gh-pages # شاخه‌ای که فایل‌های بیلد در آن قرار می‌گیرد
          folder: build/web # پوشه‌ای که باید آپلود شود